<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="Personal">
	<select id="accountList" resultType="com.pb.client.BankAccountDto">
  	  	select * from bank_account where client_id=#{user_id}
  	</select>
	<select id="accountDetail" parameterType="String" resultType="com.pb.client.BankAccountDto">
  	  	select * from bank_account where account_number=#{account_number}
  	</select>
	<select id="otherBankAccountDetail" parameterType="String" resultType="com.pb.client.BankAccountDto">
  	  	select * from other_bank_account where account_number=#{account_number}
  	</select>
	<select id="checkAccount" parameterType="String" resultType="int">
  	  	select count(*) from bank_account where account_number=#{account_number}
  	</select>
	<select id="checkOtherAccount" parameterType="String" resultType="int">
  	  	select count(*) from other_bank_account where account_number=#{account_number}
  	</select>
	<update id="updateIncorrectCount">
		update bank_account set incorrect_count=incorrect_count+1 where account_number=#{account_number}
	</update>
	<update id="updateIncorrectCountReset">
		update bank_account set incorrect_count=0 where account_number=#{account_number}
	</update>
	<select id="tradeLogList" parameterType="hashmap" resultType="com.pb.client.TradeLogDto">
  	  	select * from trade_log where account_number =#{account_number} and trade_time between #{firstDate} and #{endDate}
  	</select>
	<select id="tradeLogListDeposit" parameterType="hashmap" resultType="com.pb.client.TradeLogDto">
  	  	<![CDATA[
  	  	select * from trade_log where account_number =#{account_number} and input_money <> 0 and trade_time between #{firstDate} and #{endDate}
  	  	]]>
  	</select>
	<select id="tradeLogListWithdrawal" parameterType="hashmap" resultType="com.pb.client.TradeLogDto">
		<![CDATA[
  	  	select * from trade_log where account_number =#{account_number} and output_money <> 0 and trade_time between #{firstDate} and #{endDate}
  	  	]]>
  	</select>
</mapper>